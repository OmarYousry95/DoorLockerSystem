/***********************************************************************************************
 * [FILE NAME]:		Control_ECU.h
 * [AUTHOR]:		Omar Yousry
 * [DATE CREATED]:	27 Jan 2020
 * [DESCRIPTION]:	This header file contains configurations and file inclusions of Control_ECU
 ***********************************************************************************************/

#ifndef CONTROL_ECU_H_
#define CONTROL_ECU_H_

/******************************************************************
 * 					  Header Files Inclusion					  *
 ******************************************************************/
#include "uart.h"


/******************************************************************
 * 				  			  Macros					          *
 ******************************************************************/
#define PASSWORD_SIZE				5u
#define HMI_ECU_READY				0x10
#define CHECK_FOR_SAVED_PASSWORD	0x11
#define NO_SAVED_PASSWORD			0x12
#define SAVED_PASSWORD				0x13
#define CORRECT_NEW_PASSWORD		0x14
#define NON_CORRECT_NEW_PASSWORD	0x15
#define CORRECT_PASSWORD			0x16
#define WRONG_PASSWORD 				0x17
#define THIEF						0x18
#define SYSTEM_UNLOCKED 			0x19
#define DOOR_UNLOCKING				0x20
#define DOOR_LOCKING				0x21
#define DOOR_LOCKED					0x22
/*Static Configuration for motor and buzzer pins*/
#define MOTOR_PIN1		PB0
#define MOTOR_PIN2		PB1
#define MOTOR_EN		PB2
#define BUZZER			PB7

/******************************************************************
 * 				    Public Functions Prototypes					  *
 ******************************************************************/
/******************************************************************************
 *[Function Name] : Control_checkForSavedPassword
 *[Description]   : This function is the first function to run in Control ECU:
 *					1. It waits until HMI ECU sends a signal for checking if there exists a previously
 *					   saved password or not
 *					2. It checks if there is a saved password in EEPROM or not
 *					3. If not exist, send a NO_SAVED_PASSWORD signal to HMI ECU
 *					4. If exists, send a SAVED_PASSWORD signal to HMI ECU
 *					### g_functionID = 0 ###
 *[Arguments]     : void
 *[Return]        : void
 ******************************************************************************/
void Control_checkForSavedPassword(void);

/******************************************************************************
 *[Function Name] : Control_setNewPassword
 *[Description]   : This function sets a new password for the system
 *					It waits until HMI ECU sends a ready signal then it receives a password
 *					### g_functionID = 1 ###
 *[Arguments]     : void
 *[Return]        : void
 ******************************************************************************/
void Control_setNewPassword(void);
void motorRotateClockwise (void);
void motorRotateAntiClockwise (void);
void buzzerON (void);
void motorStop(void);


#endif /* CONTROL_ECU_H_ */
